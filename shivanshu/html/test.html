<!DOCTYPE html>
<html>
<head>
    <title>Request List</title>
    <link rel="stylesheet" type="text/css" href="../css/request_list.css">
</head>
<body>
    <h1>Request List</h1>
    <div class="container">
        <table id="request-table">
            <thead>
                <tr>
                    <th>Blood Group</th>
                    <th>Amount</th>
                    <th>Okay with Transfusion</th>
                    <th>Action</th> <!-- New column for the Approve button -->
                </tr>
            </thead>
            <tbody>
                <!-- Table rows will be dynamically populated here -->
            </tbody>
        </table>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // Retrieve the saved requests data from localStorage
            const requests = JSON.parse(localStorage.getItem('requests')) || [];

            // Get the table body element
            const tbody = document.querySelector('#request-table tbody');

            // Loop through the requests and create table rows
            requests.forEach(function(request) {
                const row = document.createElement('tr');

                // Create and append table cells for each request property
                const bloodGroupCell = document.createElement('td');
                bloodGroupCell.textContent = request.bloodGroup;
                row.appendChild(bloodGroupCell);

                const amountCell = document.createElement('td');
                amountCell.textContent = request.amount + ' units';
                row.appendChild(amountCell);

                const transfusionCell = document.createElement('td');
                transfusionCell.textContent = request.okayWithTransfusion ? 'Yes' : 'No';
                row.appendChild(transfusionCell);

                // Create a cell for the action button
                const actionCell = document.createElement('td');
                const approveButton = document.createElement('button');
                approveButton.textContent = 'Approve';
                approveButton.addEventListener('click', function() {
                    // Handle the approve action here
                    // For demonstration, we'll just log a message
                    console.log('Approved request for ' + request.bloodGroup);
                });
                actionCell.appendChild(approveButton);
                row.appendChild(actionCell);

                // Append the row to the table body
                tbody.appendChild(row);
            });
        });
    </script>
</body>
</html>
